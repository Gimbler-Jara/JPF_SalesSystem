<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Listado de Ventas</title>
    <link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

<nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand" href="#"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
        <a class="nav-link" th:href="@{/categorias}">Categorias</a>
        <a class="nav-link" th:href="@{/productos}">Productos</a>
        <a class="nav-link" th:href="@{/roles}">Roles</a>
        <a class="nav-link" th:href="@{/usuarios}">Usuarios</a>
        <a class="nav-link" th:href="@{/ventas}">Ventas</a>
      </div>
    </div>
  </div>
</nav>


    <div class="container mt-5">
        <h2 class="text-center">Listado de Ventas</h2>
       
        <table class="table table-striped table-bordered mt-4 text-center">
            <thead>
                <tr>
                    <th>ID</th>
               		 <th>Usuario</th>
               		 <th>Total Venta</th>
                	<th>Fecha</th>
                <!--    <th>Acciones</th> --> 
                    </tr>
            </thead>
            <tbody>
                <tr th:each="venta : ${ventas}">
                   <td th:text="${venta.id_venta}"></td>
                    <td th:text="${venta.usuario.username}"></td>
                   <td th:text="${venta.totalVenta}"></td>
                   <td th:text="${#temporals.format(venta.fecha, 'dd/MM/yyyy HH:mm')}"></td>
                     <td>
                    <!--    <a th:href="@{'/ventas/editar' + '/' + ${venta.getId_venta()}}" class="btn btn-warning btn-sm">Editar</a> 
                        <a th:href="@{'/ventas/detallesVenta' + '/' + ${venta.id_venta}}" class="btn btn-info btn-sm">Ver detallesr</a>--> 
                         <a th:href="@{/ventas/detallesVenta(idVenta=${venta.id_venta})}" class="btn btn-info btn-sm">Ver detalles</a>
                    </td>
                </tr>
            </tbody>
        </table>
            
    <a th:href="@{/ventas}" class="btn btn-primary mt-3">Registrar Nueva Venta</a>
    </div>
    
       <!-- Mostrar alerta de éxito 
   <!-- <div th:if="${success}" class="alert alert-success" th:text="${success}">  </div>-->
    
    <script th:if="${success}">
        Swal.fire({
          icon: 'success',
          title: 'Éxito',
          text: '[[${success}]]' ,
          timer: 3000,
          showConfirmButton: false
        });
    </script>

    <!-- Mostrar alerta de stock mínimo -->
   <!-- <div th:if="${alertaStock}" class="alert alert-warning" th:text="${alertaStock}"></div>-->
    
    <script th:if="${alertaStock}">
        Swal.fire({
          icon: 'warning',
          title: 'Advertencia',
          text: '[[${alertaStock}]]', 
          timer: 3000,
          showConfirmButton: true
        });
    </script>
</body>
</html>
